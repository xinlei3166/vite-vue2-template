import{B as P,h as k,i as d}from"./index-47f5c5d7.js";function q(t){return P.get("/api/mock/data/list",t)}const C={size:"small",current:1,defaultCurrent:1,pageSize:10,total:0,showTotal:t=>`共${t}条`,showLessItems:!0,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100"]};function D(t){const e=k({...C,...t||{}}),i=d(!1),n=d([]);return{loading:i,data:n,pagination:e}}function x(t,{params:s,pagination:e={},dataKey:i="list",cb:n,method:v="get",codeKey:h="code",successCode:S=0}){const m=e||{},{loading:u,data:r,pagination:o}=D({...m}),c=d(),f=async(g={})=>{var p;u.value=!0;const w=e?o.pageSize:void 0,z=e?o.current:void 0;let l={pageSize:w,pageNo:z,...s==null?void 0:s.value,...g};v==="get"&&(l={params:l});const a=await t(l);u.value=!1,!(!a||a[h]!==S)&&(c.value=a.data,i?r.value=a.data[i]||[]:r.value=a.data,o.total=((p=a.data)==null?void 0:p.total)||0,n==null||n({sourceData:c,data:r}))};return{loading:u,sourceData:c,data:r,pagination:o,init:f,onSearch:async(g={})=>{o.current=1,await f(g)}}}export{q as g,x as u};
